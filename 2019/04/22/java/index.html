<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="I.Most Basics1.variables - primitive and reference  primitive(8种)  1234567booleancharinteger:  byte(8bits), short(16bits), int(32bits), long(64bits)  其中，int：[-2147483648, 2147483647] //10位float(32bits">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="Java I Basics">
<meta property="og:url" content="http://yoursite.com/2019/04/22/java/index.html">
<meta property="og:site_name" content="Secret Garden">
<meta property="og:description" content="I.Most Basics1.variables - primitive and reference  primitive(8种)  1234567booleancharinteger:  byte(8bits), short(16bits), int(32bits), long(64bits)  其中，int：[-2147483648, 2147483647] //10位float(32bits">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://yoursite.com/2019/04/22/java/AccessModifier.png">
<meta property="og:image" content="http://yoursite.com/2019/04/22/java/relation.jpg">
<meta property="og:image" content="http://yoursite.com/2019/04/22/java/hierarchy.png">
<meta property="og:image" content="http://yoursite.com/2019/04/22/java/mapDemo.png">
<meta property="og:updated_time" content="2019-10-09T18:31:06.198Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java I Basics">
<meta name="twitter:description" content="I.Most Basics1.variables - primitive and reference  primitive(8种)  1234567booleancharinteger:  byte(8bits), short(16bits), int(32bits), long(64bits)  其中，int：[-2147483648, 2147483647] //10位float(32bits">
<meta name="twitter:image" content="http://yoursite.com/2019/04/22/java/AccessModifier.png">






  <link rel="canonical" href="http://yoursite.com/2019/04/22/java/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Java I Basics | Secret Garden</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Secret Garden</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">a Hogwarts student</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/22/java/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Annie Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Secret Garden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java I Basics

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-22 19:03:16" itemprop="dateCreated datePublished" datetime="2019-04-22T19:03:16-05:00">2019-04-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-10-09 13:31:06" itemprop="dateModified" datetime="2019-10-09T13:31:06-05:00">2019-10-09</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="I-Most-Basics"><a href="#I-Most-Basics" class="headerlink" title="I.Most Basics"></a>I.Most Basics</h3><p><strong>1.variables</strong> - primitive and reference</p>
<ul>
<li>primitive(8种)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span></span><br><span class="line"><span class="keyword">char</span></span><br><span class="line">integer:</span><br><span class="line">  <span class="keyword">byte</span>(<span class="number">8</span>bits), <span class="keyword">short</span>(<span class="number">16</span>bits), <span class="keyword">int</span>(<span class="number">32</span>bits), <span class="keyword">long</span>(<span class="number">64</span>bits)</span><br><span class="line">  其中，<span class="keyword">int</span>：[-<span class="number">2147483648</span>, <span class="number">2147483647</span>] <span class="comment">//10位</span></span><br><span class="line"><span class="keyword">float</span>(<span class="number">32</span>bits): <span class="keyword">float</span> x = <span class="number">32.5f</span>; <span class="comment">//必须加上f</span></span><br><span class="line"><span class="keyword">double</span>(<span class="number">64</span>bits)</span><br></pre></td></tr></table></figure>
<p>local variables is within a method, it must be initialized before use.</p>
<p><strong>2.Class &amp; objects</strong><br>class is the blueprint of objects, instance is another way of saying objects.</p>
<p>Object has instance variables(state) and methods(behavior).</p>
<p>一旦没有指向某object的variable了，这个object就会被GC回收。</p>
<p><strong>3.Arrays</strong><br><strong>Arrays are always objects</strong>, whether they hold primitives or object references.</p>
<p><strong>4.Java is pass everything by value</strong>, which means pass-by-copy.<br>如果传入的是一个reference variable, pass a copy of that remote control, 就是传入的是一个复制的地址。</p>
<p><strong>5.setter &amp; getter</strong><br>用setter和getter的好处是，可以不破坏class的原有代码，而在这两个函数里做想做的事。比如instance variables are private, but setter and getter are public, so other objects can access to it by using setter and getter.</p>
<p><strong>6.Java Library</strong><br>Every class in java belongs to a package.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br></pre></td></tr></table></figure>
<h3 id="II-override-amp-overload"><a href="#II-override-amp-overload" class="headerlink" title="II.override &amp; overload"></a>II.override &amp; overload</h3><p>Only override achieves Polymorphism. Overloading has nothing to do with inheritance, but it can achieve static polymorphism!</p>
<h4 id="override"><a href="#override" class="headerlink" title="override"></a>override</h4><p>子类可以复写父类里的方法.<br>Override allows subclass to provide a specific implementation of a method that is already provided by one of its super classes.  </p>
<ul>
<li>The arguments must be the same; the return type is a subtype of the return type declared in the superclass.</li>
<li>The method cannot be less accessible, like from public to private.</li>
</ul>
<h4 id="overload"><a href="#overload" class="headerlink" title="overload"></a>overload</h4><p>必须是参数的数量或类型不一样，但是对返回的类型没有要求.<br>Allow different methods to have the same name, but different signatures differing on the number or type of the input parameters. Overloading cannot distinguish two same signatures with different return type.<br>Can vary the access level in any directions, 即overload的方法可以改变access modifier的类型。</p>
<p>Therefore, the return type can be same or different. Just make sure the number or type of input parameters are different.</p>
<h3 id="static-amp-final"><a href="#static-amp-final" class="headerlink" title="static &amp; final"></a>static &amp; final</h3><h4 id="static"><a href="#static" class="headerlink" title="static"></a>static</h4><p>variable, method, class, block<br>static variables and methods are on the class level which is shared with the objects.</p>
<ul>
<li>Static variable is initialized only once, at the start of the execution.</li>
<li>Static method can be invoked without the need for creating an instance of a class.</li>
<li>Only nested/inner classes can be static.<br>A static class cannot access non-static members of the Outer class. It can access only static members of Outer class.</li>
</ul>
<p>There is no global variable in Java. The so called “Global variable” declared after class and outside of methods is actually a class-level variable, which called instance variable.<br>具体见Java III文章。</p>
<h4 id="final"><a href="#final" class="headerlink" title="final"></a>final</h4><p><strong>final变量一旦初始化后不能重新赋值</strong><br><strong>final方法不能被复写，但是可以被继承</strong><br><strong>final类不能被继承</strong>: A lot of classes in Java are final to keep security, like String class.</p>
<ul>
<li>variable: cannot change the value of final variable</li>
<li>method: cannot override final method, final method is inherited</li>
<li>class: cannot extend final class</li>
</ul>
<p>1)blank final variable:<br>A final variable that is not initialized at the time of declaration. It can be initialized only in constructor</p>
<p>2)static blank final variable:<br>static final variable that is not initialized at the time of declaration. It can be initialized only in static block.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> num;</span><br><span class="line"><span class="keyword">static</span>&#123; num = <span class="number">10</span>; &#125;</span><br></pre></td></tr></table></figure>
<h4 id="static-final"><a href="#static-final" class="headerlink" title="static final"></a>static final</h4><p>static final variables are constants. Constant variables names should be Capital.<br><br></p>
<h3 id="Package"><a href="#Package" class="headerlink" title="Package"></a>Package</h3><p>Package is to encapsulate a group of classes, sub-packages and interfaces.<br>Packages are used for:</p>
<ul>
<li>Prevent name conflicts</li>
<li>Provide control access<br><strong>protected and default are package-level.</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建package，通常小写字母，必须放在第一行</span></span><br><span class="line"><span class="keyword">package</span> xxx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxx.*; <span class="comment">//*通配符</span></span><br></pre></td></tr></table></figure>
<h3 id="Access-modifier"><a href="#Access-modifier" class="headerlink" title="Access modifier"></a>Access modifier</h3><p>restrict the scope of class, method, variable.<br><strong>class cannot be private or protected</strong>, unless the class is inner class.</p>
<p>4 types: default(no keyword), private, protected, public.</p>
<img src="/2019/04/22/java/AccessModifier.png" title="access_modifer">
<p>public &gt; protected &gt; default &gt; private<br>对于protected：只有不同package的非子类不能获取<br>对于default：只有相同的package才能获取</p>
<h3 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h3><p>(achieve polymorphism)</p>
<ul>
<li>only contain method signatures and fields, cannot contain the implementation of the methods.</li>
<li>public or default access modifier.</li>
<li>class that implements an interface must implement all the methods declared in the interface.<br>Doesn’t need to declare the variables of the interface. Only the methods.</li>
<li>a class can implement multiple interfaces</li>
<li>interface cannot be instantiated</li>
<li>interface can inherit another interface</li>
</ul>
<p>Those types can implement Interface:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class</span><br><span class="line">abstract class</span><br><span class="line">nested class</span><br><span class="line">Enum</span><br></pre></td></tr></table></figure>
<p>Eg.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//注意interface是 EXTENDS interface！</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">changeGear</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">applyBrakes</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bicycle</span> <span class="keyword">implements</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> speed, gear;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changeGear</span><span class="params">(<span class="keyword">int</span> newGear)</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">applyBrakes</span><span class="params">(<span class="keyword">int</span> decrement)</span></span>&#123;</span><br><span class="line">    speed -= decrement;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>once a class implements a java interface, can assign an instance of this class to a interface-type variable:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vehicle is an interface, bicycle is a class</span></span><br><span class="line">Vehicle veh = <span class="keyword">new</span> Bicycle();</span><br><span class="line">veh.changeGear(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h4 id="Generic-Interface"><a href="#Generic-Interface" class="headerlink" title="Generic Interface"></a>Generic Interface</h4><p>Generic interface can be typed - it can be specialized to work with a specific type when used.</p>
<p>Eg, 对比着看一下三个block里的代码：<br>Ordinary interface:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> interface <span class="title">MyProducer</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Object <span class="title">produce</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarProducer</span> <span class="keyword">implements</span> <span class="title">MyProducer</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Object <span class="title">produce</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Car();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyProducer car_producer = <span class="keyword">new</span> CarProducer();</span><br><span class="line"><span class="comment">//这里用到了 cast, 即(Car)</span></span><br><span class="line">Car car = (Car) car_producer.produce();</span><br></pre></td></tr></table></figure>
<p>But using Generic interface &lt; T &gt;, there is no need to cast the object returned from produce() method:<br>因为不同class implement interface method后的return type会不会不同，所以可以在interface里用&lt; T &gt;来解决。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyProducer</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> T <span class="title">produce</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarProducer</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">MyProducer</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> T <span class="title">produce</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (T) <span class="keyword">new</span> Car();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyProducer&lt;Car&gt; car_producer = <span class="keyword">new</span> CarProducer&lt;Car&gt;();</span><br><span class="line">Car car = car_producer.produce();</span><br><span class="line"></span><br><span class="line">MyProducer&lt;String&gt; car_producer_str = <span class="keyword">new</span> CarProducer&lt;String&gt;();</span><br><span class="line">String car_str = car_producer_str.produce();</span><br></pre></td></tr></table></figure>
<p>Can lock down the generic type of the MyProducer interface when implementing it:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarProducer</span> <span class="keyword">implements</span> <span class="title">MyProducer</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Car <span class="title">produce</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Car();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//the enum constants should be in uppercase letters</span></span><br><span class="line"><span class="comment">//xxx相当于是这个group of constants的type name</span></span><br><span class="line"><span class="keyword">enum</span> XXX &#123;AA, BB, CC, DD&#125;;</span><br><span class="line">XXX myEnum = XXX.A;</span><br></pre></td></tr></table></figure>
<p>enum type has a values() method</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//loop through</span></span><br><span class="line"><span class="keyword">for</span>(XXX myEnum : XXX.values()) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h3><p>(achieve polymorphism)</p>
<p>abstract class and abstract methods.<br>abstract classes <strong>must be extended</strong>, abstract methods <strong>must be overriden</strong>.</p>
<p><strong>1) Abtract class</strong><br>It is similar to interface, except that it can contain method implementation.<br>It provides common method implementation to all the subclasses or to provide default implementation.</p>
<ul>
<li>abstract class <strong>cannot be instantiated</strong>!</li>
<li>abstract class can implement interfaces without providing implementation of interface methods.</li>
<li>abstract class can have constructor.</li>
<li>abstract class can have static members.</li>
</ul>
<p><strong>2) Abstract method</strong></p>
<ul>
<li>abstract method doesn’t have a body, so no curly braces!</li>
</ul>
<p><strong>3) 关系</strong></p>
<ul>
<li>abstract methods must exist in a abstract class.</li>
<li>abstract class can have no abstract methods.</li>
<li><strong>subclass of abstract class must implement all the abstract methods</strong>. But if the subclass is also an abstract class, it can choose to implement or not.</li>
</ul>
<p>抽象class里可以没有抽象method，但有抽象method的class一定是抽象class。</p>
<p>Eg1:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String name, gender;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, gender)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.gender = gender;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//abstract method has no body</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changeName</span><span class="params">(String newName)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = newName;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, String gender, <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(name, gender);</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(id == <span class="number">0</span>) ...</span><br><span class="line">    <span class="keyword">else</span> ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">  Person student = <span class="keyword">new</span> Employee(<span class="string">"John"</span>, <span class="string">"Male"</span>, <span class="number">0</span>);</span><br><span class="line">  student.work();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Eg2:<br>假设Wolf -&gt; abstract Canine -&gt; abstract Animal。如果Animal中有一个abstract method在Canine中被implement了，那么Wolf就不一定要implement这个method了。但是如果Canine没有implement它，那么Wolf就一定要implement它。<br>总结就是abstract super class的subclass chain中的第一个class一定要implement superclass里的abstract methods，后面的就可以随便了。但如果subclass is also an abstract class, 可以选择不implement。</p>
<h3 id="Four-Pillars"><a href="#Four-Pillars" class="headerlink" title="Four Pillars"></a>Four Pillars</h3><ul>
<li>Encapsulation[ɪn,kæpsə’leɪʃən]<br>data hiding, wrap variable and methods in a single unit.</li>
<li>Polymorphism[,pɑlɪ’mɔrfɪzm]<br>method override and overload<br>具体：different classes can implement the same interface. Each of these classes can provide its own implementation of the interface.</li>
<li>Abstraction<br>detail hiding, only show the relevant details, reduce complexity, act as blueprint.<br>achieved by <strong>interface and abstract classes</strong>.</li>
<li>Inheritance<br>class cannot inherit multiple classes</li>
</ul>
<h3 id="The-way-Java-works"><a href="#The-way-Java-works" class="headerlink" title="The way Java works"></a>The way Java works</h3><p>source code(.java file) -&gt; compiler(create .class file) -&gt; .class file(is made up by bytecode) -&gt; JVM reads and runs bytecode.</p>
<h4 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h4><p>Java virtual machine is a run-time engine to run Java applications, it is an <strong>interpreter by executing java code</strong>.</p>
<p>1) diff between JDK, JRE, JVM<br><img src="/2019/04/22/java/relation.jpg" title="relation"></p>
<p>JRE是橘黄色的方框里包裹的全部内容，JDK是整个蓝色框里包裹的全部内容。</p>
<h4 id="heap-amp-stack"><a href="#heap-amp-stack" class="headerlink" title="heap &amp; stack"></a>heap &amp; stack</h4><p><strong>stack</strong> memory：<br>指程序里有一个method时，会为这个方法单独分配一块私属存储空间，用于存储这个方法内部的局部变量。当这个方法结束时，分配给这个方法的stack会释放，这个stack中的变量也将随之释放。<br>stack memory is used for static memory allocation and the execution of a thread. 可以理解成一个thread一个stack，复制这个thread上的memory。<br>It contains primitive values that are specific to a method and references to the objects in the heap referred from the method.</p>
<p><strong>heap</strong>：<br>stores objects and classes, new出来的对象都放在heap里，它不会随方法的结束而消失。<br>方法中的<strong>局部变量使用final修饰后，放在heap中</strong>，而不是stack中。</p>
<p><strong>比较</strong>：</p>
<ul>
<li>Objects stored in heap are globally accessible; stack memory cannot be accessed by other threads.</li>
<li>heap memory lives during the application execution; Stack memory is short-lived.</li>
<li>Stack memory size is less than Heap memory, but faster.</li>
</ul>
<h4 id="Garbage-Collection"><a href="#Garbage-Collection" class="headerlink" title="Garbage Collection"></a>Garbage Collection</h4><p>GC <strong>Runs on the heap memory</strong> to <strong>free the memory used by objects</strong> that doesn’t have reference.</p>
<p>JVM heap memory is divided into two parts - Young generation and old generation：<br>When the young generation is filled, GC is performed called <strong>Minor GC</strong>.<br>Old Generation memory contains the objects that are long-lived and survived after many rounds of Minor GC. When old generation memory is full, <strong>Major GC</strong> performs.</p>
<h3 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h3><p>A Collection represents a single unit of objects.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interfaces: Set, Map, List, Queue, Deque</span><br><span class="line">classes:  Vector, ArrayList, LinkedList, Stack</span><br><span class="line">          PriorityQueue, ArrayDeque,</span><br><span class="line">          HashSet, LinkedHashSet, TreeSet</span><br></pre></td></tr></table></figure>
<img src="/2019/04/22/java/hierarchy.png" title="hierarchy">
<p>Map does not extend from java.util.Collection, but they’re still considered to be part of collection:<br><img src="/2019/04/22/java/mapDemo.png" title="map"></p>
<p>虚线表示implements，实线表示extends</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/18/Firebase/" rel="next" title="Firebase">
                <i class="fa fa-chevron-left"></i> Firebase
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/19/System-Design-Basics/" rel="prev" title="System Design 基本概念">
                System Design 基本概念 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Annie Hu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">48</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#I-Most-Basics"><span class="nav-number">1.</span> <span class="nav-text">I.Most Basics</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#II-override-amp-overload"><span class="nav-number">2.</span> <span class="nav-text">II.override &amp; overload</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#override"><span class="nav-number">2.1.</span> <span class="nav-text">override</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#overload"><span class="nav-number">2.2.</span> <span class="nav-text">overload</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#static-amp-final"><span class="nav-number">3.</span> <span class="nav-text">static &amp; final</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#static"><span class="nav-number">3.1.</span> <span class="nav-text">static</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#final"><span class="nav-number">3.2.</span> <span class="nav-text">final</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#static-final"><span class="nav-number">3.3.</span> <span class="nav-text">static final</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Package"><span class="nav-number">4.</span> <span class="nav-text">Package</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Access-modifier"><span class="nav-number">5.</span> <span class="nav-text">Access modifier</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Interface"><span class="nav-number">6.</span> <span class="nav-text">Interface</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Generic-Interface"><span class="nav-number">6.1.</span> <span class="nav-text">Generic Interface</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Enum"><span class="nav-number">7.</span> <span class="nav-text">Enum</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Abstract"><span class="nav-number">8.</span> <span class="nav-text">Abstract</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Four-Pillars"><span class="nav-number">9.</span> <span class="nav-text">Four Pillars</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-way-Java-works"><span class="nav-number">10.</span> <span class="nav-text">The way Java works</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#JVM"><span class="nav-number">10.1.</span> <span class="nav-text">JVM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#heap-amp-stack"><span class="nav-number">10.2.</span> <span class="nav-text">heap &amp; stack</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Garbage-Collection"><span class="nav-number">10.3.</span> <span class="nav-text">Garbage Collection</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Collection"><span class="nav-number">11.</span> <span class="nav-text">Collection</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Annie Hu</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.7.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.7.0"></script>



  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  


  


  

  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
